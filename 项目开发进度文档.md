# ä¸ªäººåšå®¢ç³»ç»Ÿå¼€å‘è¿›åº¦æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°
- **é¡¹ç›®åç§°**: ä¸ªäººåšå®¢ç³»ç»Ÿ (myBlog)
- **æŠ€æœ¯æ ˆ**: Spring Boot 3.2.0 + Java 17 + MyBatis-Plus 3.5.5 + MySQL + Spring Security + JWT
- **å¼€å‘è€…**: lanzhiqiang
- **GitHub**: https://github.com/vsh4d0w/myblog

---

## ğŸ‰ é¡¹ç›®å¼€å‘å®Œæˆï¼

### å®Œæˆæ—¶é—´: 2025-12-01

---

## ç¬¬ä¸€é˜¶æ®µï¼šâœ… é¡¹ç›®åˆå§‹åŒ–ä¸é…ç½® (å·²å®Œæˆ)

### å®Œæˆå†…å®¹ï¼š
1. âœ… ä¿®å¤ pom.xml é…ç½®
   - Spring Boot ç‰ˆæœ¬: 3.2.0
   - Java ç‰ˆæœ¬: 17
   - MyBatis-Plus ç‰ˆæœ¬: 3.5.5 (Spring Boot 3 ä¸“ç”¨ starter)
2. âœ… é…ç½® application.properties
   - MySQL è¿æ¥é…ç½® (localhost:3306/myblog, root, ç©ºå¯†ç )
   - MyBatis-Plus é…ç½®
   - JWT é…ç½® (jwt.secret, jwt.expiration=86400000)
   - ç«¯å£: 8080
3. âœ… é¡¹ç›®ç¼–è¯‘æˆåŠŸ

### ä¾èµ–æ¸…å•ï¼š
- Spring Boot Web Starter
- MyBatis-Plus Spring Boot 3 Starter (3.5.5)
- Spring Security
- Spring Validation
- MySQL Connector J
- Lombok
- JWT (JJWT 0.11.5)

---

## ç¬¬äºŒé˜¶æ®µï¼šâœ… æ•°æ®åº“è®¾è®¡ä¸å®ç° (å·²å®Œæˆ)

### 1. æ•°æ®åº“é…ç½®
- **æ•°æ®åº“å**: myblog
- **å­—ç¬¦é›†**: UTF8MB4
- **MySQLç”¨æˆ·**: root (å¯†ç ä¸ºç©º)

### 2. æ•°æ®è¡¨ (å…±3å¼ æ ¸å¿ƒè¡¨)

#### 2.1 ç”¨æˆ·è¡¨ (user)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®ï¼Œè‡ªå¢ |
| username | VARCHAR(50) | ç”¨æˆ·åï¼Œå”¯ä¸€ |
| password | VARCHAR(255) | BCryptåŠ å¯†å¯†ç  |
| nickname | VARCHAR(50) | æ˜µç§° |
| email | VARCHAR(100) | é‚®ç®± |
| avatar | VARCHAR(255) | å¤´åƒURL |
| role | VARCHAR(20) | è§’è‰²: ADMIN/GUEST |
| status | TINYINT | çŠ¶æ€: 1æ­£å¸¸/0ç¦ç”¨ |
| create_time | DATETIME | åˆ›å»ºæ—¶é—´ |
| update_time | DATETIME | æ›´æ–°æ—¶é—´ |

#### 2.2 åšæ–‡è¡¨ (blog_post)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®ï¼Œè‡ªå¢ |
| title | VARCHAR(200) | æ ‡é¢˜ |
| content | LONGTEXT | å†…å®¹ |
| summary | VARCHAR(500) | æ‘˜è¦ |
| category | VARCHAR(20) | åˆ†ç±»: CTF/LEARN/SOMETHING |
| cover_image | VARCHAR(255) | å°é¢å›¾URL |
| author_id | BIGINT | ä½œè€…ID |
| view_count | INT | æµè§ˆé‡ |
| status | TINYINT | çŠ¶æ€: 1å‘å¸ƒ/0è‰ç¨¿ |
| create_time | DATETIME | åˆ›å»ºæ—¶é—´ |
| update_time | DATETIME | æ›´æ–°æ—¶é—´ |

#### 2.3 è¯„è®ºè¡¨ (comment)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | BIGINT | ä¸»é”®ï¼Œè‡ªå¢ |
| post_id | BIGINT | åšæ–‡ID |
| user_id | BIGINT | è¯„è®ºç”¨æˆ·ID |
| content | TEXT | è¯„è®ºå†…å®¹ |
| parent_id | BIGINT | çˆ¶è¯„è®ºID(å›å¤ç”¨) |
| reply_to_user_id | BIGINT | å›å¤ç»™è° |
| status | TINYINT | çŠ¶æ€: 1æ­£å¸¸/0éšè— |
| create_time | DATETIME | åˆ›å»ºæ—¶é—´ |
| update_time | DATETIME | æ›´æ–°æ—¶é—´ |

### 3. åˆå§‹åŒ–è„šæœ¬
- **ä½ç½®**: `src/main/resources/sql/init.sql`
- **å†…å®¹**: åˆ›å»ºæ•°æ®åº“ã€3å¼ è¡¨ã€ç®¡ç†å‘˜è´¦å·ã€3ç¯‡ç¤ºä¾‹åšæ–‡

### 4. ç®¡ç†å‘˜è´¦å·
- **ç”¨æˆ·å**: sh4d0w
- **å¯†ç **: 467194403
- **è§’è‰²**: ADMIN

---

## ç¬¬ä¸‰é˜¶æ®µï¼šâœ… æ ¸å¿ƒä»£ç å®ç° (å·²å®Œæˆ)

### 1. å®ä½“ç±» (Entity) âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `entity/User.java` | ç”¨æˆ·å®ä½“ | âœ… |
| `entity/BlogPost.java` | åšæ–‡å®ä½“ | âœ… |
| `entity/Comment.java` | è¯„è®ºå®ä½“ | âœ… |
| `entity/Category.java` | åˆ†ç±»æšä¸¾ | âœ… |

### 2. Mapper å±‚ âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `mapper/UserMapper.java` | ç”¨æˆ·æ•°æ®è®¿é—® | âœ… |
| `mapper/BlogPostMapper.java` | åšæ–‡æ•°æ®è®¿é—® | âœ… |
| `mapper/CommentMapper.java` | è¯„è®ºæ•°æ®è®¿é—® | âœ… |

### 3. DTO å±‚ âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `dto/UserLoginDTO.java` | ç™»å½•è¯·æ±‚ | âœ… |
| `dto/UserRegisterDTO.java` | æ³¨å†Œè¯·æ±‚ | âœ… |
| `dto/PostCreateDTO.java` | åˆ›å»ºåšæ–‡è¯·æ±‚ | âœ… |
| `dto/PostUpdateDTO.java` | æ›´æ–°åšæ–‡è¯·æ±‚ | âœ… |
| `dto/CommentCreateDTO.java` | åˆ›å»ºè¯„è®ºè¯·æ±‚ | âœ… |
| `common/Result.java` | ç»Ÿä¸€å“åº”å¯¹è±¡ | âœ… |

### 4. Service å±‚ âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `service/UserService.java` | ç”¨æˆ·æœåŠ¡æ¥å£ | âœ… |
| `service/BlogPostService.java` | åšæ–‡æœåŠ¡æ¥å£ | âœ… |
| `service/CommentService.java` | è¯„è®ºæœåŠ¡æ¥å£ | âœ… |
| `service/impl/UserServiceImpl.java` | ç”¨æˆ·æœåŠ¡å®ç° | âœ… |
| `service/impl/BlogPostServiceImpl.java` | åšæ–‡æœåŠ¡å®ç° | âœ… |
| `service/impl/CommentServiceImpl.java` | è¯„è®ºæœåŠ¡å®ç° | âœ… |

### 5. Controller å±‚ âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `controller/AuthController.java` | è®¤è¯æ§åˆ¶å™¨ | âœ… |
| `controller/PostController.java` | åšæ–‡æ§åˆ¶å™¨ | âœ… |
| `controller/CommentController.java` | è¯„è®ºæ§åˆ¶å™¨ | âœ… |
| `controller/AdminController.java` | ç®¡ç†å‘˜æ§åˆ¶å™¨ | âœ… |

### 6. å®‰å…¨ä¸é…ç½® âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `config/SecurityConfig.java` | Spring Securityé…ç½® | âœ… |
| `config/MyBatisPlusConfig.java` | MyBatis-Plusé…ç½® | âœ… |
| `config/MyMetaObjectHandler.java` | è‡ªåŠ¨å¡«å……å¤„ç†å™¨ | âœ… |
| `filter/JwtAuthenticationFilter.java` | JWTè®¤è¯è¿‡æ»¤å™¨ | âœ… |
| `utils/JwtUtils.java` | JWTå·¥å…·ç±» | âœ… |

### 7. å¼‚å¸¸å¤„ç† âœ…
| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `exception/BusinessException.java` | ä¸šåŠ¡å¼‚å¸¸ç±» | âœ… |
| `exception/GlobalExceptionHandler.java` | å…¨å±€å¼‚å¸¸å¤„ç†å™¨ | âœ… |

---

## ç¬¬å››é˜¶æ®µï¼šâœ… æµ‹è¯•éªŒè¯ (å·²å®Œæˆ)

### 1. ç¼–è¯‘æµ‹è¯• âœ…
```bash
./mvnw clean compile -DskipTests
# BUILD SUCCESS - 34 source files compiled
```

### 2. æ•°æ®åº“åˆå§‹åŒ– âœ…
```bash
mysql -u root < src/main/resources/sql/init.sql
# æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ
```

### 3. åº”ç”¨å¯åŠ¨æµ‹è¯• âœ…
```bash
./mvnw spring-boot:run
# Started MyBlogApplication in 0.845 seconds
# Tomcat started on port 8080
```

### 4. API æ¥å£æµ‹è¯• âœ…

#### è·å–åšæ–‡åˆ—è¡¨
```bash
curl http://localhost:8080/api/posts
# è¿”å› 3 ç¯‡ç¤ºä¾‹åšæ–‡
```

#### ç®¡ç†å‘˜ç™»å½•
```bash
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"sh4d0w","password":"467194403"}'
# è¿”å› JWT Token
```

#### ç”¨æˆ·æ³¨å†Œ
```bash
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"testpass123"}'
# æ³¨å†ŒæˆåŠŸ
```

---

## API æ¥å£æ–‡æ¡£

### å…¬å¼€æ¥å£ (æ— éœ€è®¤è¯)
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/login` | ç”¨æˆ·ç™»å½• |
| POST | `/api/auth/register` | æ¸¸å®¢æ³¨å†Œ |
| GET | `/api/posts` | è·å–åšæ–‡åˆ—è¡¨(åˆ†é¡µ) |
| GET | `/api/posts/{id}` | è·å–åšæ–‡è¯¦æƒ… |
| GET | `/api/posts/category/{category}` | æŒ‰åˆ†ç±»æŸ¥è¯¢åšæ–‡ |
| GET | `/api/posts/search?keyword=xxx` | æœç´¢åšæ–‡ |
| GET | `/api/comments/post/{postId}` | è·å–åšæ–‡è¯„è®º |

### è®¤è¯æ¥å£ (éœ€è¦JWT Token)
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/auth/me` | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| POST | `/api/comments` | åˆ›å»ºè¯„è®º |
| DELETE | `/api/comments/{id}` | åˆ é™¤è¯„è®º |

### ç®¡ç†å‘˜æ¥å£ (éœ€è¦ADMINè§’è‰²)
| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/posts` | åˆ›å»ºåšæ–‡ |
| PUT | `/api/posts` | æ›´æ–°åšæ–‡ |
| DELETE | `/api/posts/{id}` | åˆ é™¤åšæ–‡ |
| GET | `/api/admin/users` | è·å–æ‰€æœ‰æ¸¸å®¢ |
| PUT | `/api/admin/users/{id}/status?status=0/1` | ç¦ç”¨/å¯ç”¨ç”¨æˆ· |
| DELETE | `/api/admin/users/{id}` | åˆ é™¤ç”¨æˆ· |
| PUT | `/api/admin/comments/{id}/status?status=0/1` | å®¡æ ¸è¯„è®º |

---

## é¡¹ç›®ç»“æ„

```
src/main/java/com/lzq/myblog/
â”œâ”€â”€ MyBlogApplication.java          # å¯åŠ¨ç±»
â”œâ”€â”€ common/
â”‚   â””â”€â”€ Result.java                 # ç»Ÿä¸€å“åº”
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ MyBatisPlusConfig.java      # MyBatis-Plusé…ç½®
â”‚   â”œâ”€â”€ MyMetaObjectHandler.java    # è‡ªåŠ¨å¡«å……
â”‚   â””â”€â”€ SecurityConfig.java         # Securityé…ç½®
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ AdminController.java        # ç®¡ç†å‘˜API
â”‚   â”œâ”€â”€ AuthController.java         # è®¤è¯API
â”‚   â”œâ”€â”€ CommentController.java      # è¯„è®ºAPI
â”‚   â””â”€â”€ PostController.java         # åšæ–‡API
â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ CommentCreateDTO.java
â”‚   â”œâ”€â”€ PostCreateDTO.java
â”‚   â”œâ”€â”€ PostUpdateDTO.java
â”‚   â”œâ”€â”€ UserLoginDTO.java
â”‚   â””â”€â”€ UserRegisterDTO.java
â”œâ”€â”€ entity/
â”‚   â”œâ”€â”€ BlogPost.java
â”‚   â”œâ”€â”€ Category.java
â”‚   â”œâ”€â”€ Comment.java
â”‚   â””â”€â”€ User.java
â”œâ”€â”€ exception/
â”‚   â”œâ”€â”€ BusinessException.java
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ filter/
â”‚   â””â”€â”€ JwtAuthenticationFilter.java
â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ BlogPostMapper.java
â”‚   â”œâ”€â”€ CommentMapper.java
â”‚   â””â”€â”€ UserMapper.java
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ BlogPostService.java
â”‚   â”œâ”€â”€ CommentService.java
â”‚   â”œâ”€â”€ UserService.java
â”‚   â””â”€â”€ impl/
â”‚       â”œâ”€â”€ BlogPostServiceImpl.java
â”‚       â”œâ”€â”€ CommentServiceImpl.java
â”‚       â””â”€â”€ UserServiceImpl.java
â””â”€â”€ utils/
    â””â”€â”€ JwtUtils.java

src/main/resources/
â”œâ”€â”€ application.properties          # é…ç½®æ–‡ä»¶
â””â”€â”€ sql/
    â””â”€â”€ init.sql                    # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
```

---

## å¿«é€Ÿå¯åŠ¨æŒ‡å—

### 1. ç¯å¢ƒè¦æ±‚
- Java 17+
- MySQL 8.0+
- Maven 3.6+

### 2. æ•°æ®åº“åˆå§‹åŒ–
```bash
# ç¡®ä¿ MySQL æœåŠ¡å·²å¯åŠ¨ï¼Œroot ç”¨æˆ·å¯†ç ä¸ºç©º
mysql -u root < src/main/resources/sql/init.sql
```

### 3. å¯åŠ¨åº”ç”¨
```bash
./mvnw spring-boot:run
```

### 4. è®¿é—®æµ‹è¯•
- API åœ°å€: http://localhost:8080
- ç®¡ç†å‘˜è´¦å·: sh4d0w / 467194403

---

## åŠŸèƒ½æ‰©å±•å»ºè®®ï¼ˆå¾…å¼€å‘ï¼‰

### çŸ­æœŸæ‰©å±•
- [ ] Swagger/Knife4j API æ–‡æ¡£
- [ ] Markdown ç¼–è¾‘å™¨æ”¯æŒ
- [ ] é‚®ç®±éªŒè¯æ³¨å†Œ

### ä¸­æœŸæ‰©å±•
- [ ] å‰ç«¯é¡µé¢ï¼ˆVue/Reactï¼‰
- [ ] æ ‡ç­¾ç³»ç»Ÿ
- [ ] ç‚¹èµ/æ”¶è—åŠŸèƒ½
- [ ] è¯„è®ºå®¡æ ¸æœºåˆ¶

### é•¿æœŸæ‰©å±•
- [ ] Redis ç¼“å­˜
- [ ] Elasticsearch å…¨æ–‡æœç´¢
- [ ] æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ
- [ ] Docker éƒ¨ç½²

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
**åˆ›å»ºæ—¶é—´**: 2025-12-01  
**æœ€åæ›´æ–°**: 2025-12-01  
**é¡¹ç›®çŠ¶æ€**: âœ… åç«¯å¼€å‘å®Œæˆï¼Œå·²æ¨é€è‡³ GitHub
