# 个人博客系统开发文档

## 项目概述
- **项目名称**: 个人博客系统 (myBlog)
- **技术栈**: Spring Boot 3.2.0 + Java 17 + MyBatis-Plus 3.5.5 + MySQL + Spring Security + JWT + Vue 3
- **开发者**: lanzhiqiang
- **GitHub**: https://github.com/vsh4d0w/myblog

---

## 🎉 项目开发完成！

### 完成时间: 2025-12-01

### 已完成功能：
- ✅ 核心博客系统（博文、评论、用户管理）
- ✅ JWT 身份认证
- ✅ Swagger/Knife4j API 文档
- ✅ Markdown 编辑器支持
- ✅ 邮箱验证注册
- ✅ 标签系统
- ✅ 点赞/收藏功能
- ✅ 图片上传功能
- ✅ Redis 缓存
- ✅ Vue 3 前端界面

---

## 快速启动指南

### 1. 环境要求
- Java 17+
- MySQL 8.0+
- Redis 7.0+ (可选，用于缓存)
- Node.js 18+ (前端开发)
- Maven 3.6+

### 2. 数据库初始化
```bash
# 确保 MySQL 服务已启动，root 用户密码为空
mysql -u root < src/main/resources/sql/init.sql
```

### 3. 启动后端
```bash
./mvnw spring-boot:run
```

### 4. 启动前端
```bash
cd frontend
npm install
npm run dev
```

### 5. 访问测试
- **前端地址**: http://localhost:5173
- **后端 API**: http://localhost:8080
- **API 文档**: http://localhost:8080/doc.html
- **管理员账号**: sh4d0w / 467194403

---

## 依赖清单

| 依赖 | 版本 | 说明 |
|------|------|------|
| Spring Boot Web | 3.2.0 | Web 框架 |
| Spring Boot Security | 3.2.0 | 安全框架 |
| Spring Boot Validation | 3.2.0 | 参数校验 |
| Spring Boot Mail | 3.2.0 | 邮件发送 |
| Spring Boot Redis | 3.2.0 | 缓存 |
| MyBatis-Plus | 3.5.5 | ORM 框架 |
| MySQL Connector | 8.x | 数据库驱动 |
| Lombok | - | 代码简化 |
| JJWT | 0.11.5 | JWT 工具 |
| Knife4j | 4.3.0 | API 文档 |
| CommonMark | 0.21.0 | Markdown 解析 |

---

## 数据库设计

### 核心表

#### 用户表 (user)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| username | VARCHAR(50) | 用户名，唯一 |
| password | VARCHAR(255) | BCrypt加密密码 |
| nickname | VARCHAR(50) | 昵称 |
| email | VARCHAR(100) | 邮箱 |
| avatar | VARCHAR(255) | 头像URL |
| role | VARCHAR(20) | 角色: ADMIN/GUEST |
| status | TINYINT | 状态: 1正常/0禁用 |

#### 博文表 (blog_post)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| title | VARCHAR(200) | 标题 |
| content | LONGTEXT | 内容（Markdown） |
| summary | VARCHAR(500) | 摘要 |
| category | VARCHAR(20) | 分类: CTF/LEARN/SOMETHING |
| cover_image | VARCHAR(255) | 封面图URL |
| author_id | BIGINT | 作者ID |
| view_count | INT | 浏览量 |
| status | TINYINT | 状态: 1发布/0草稿 |

#### 评论表 (comment)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键，自增 |
| post_id | BIGINT | 博文ID |
| user_id | BIGINT | 评论用户ID |
| content | TEXT | 评论内容 |
| parent_id | BIGINT | 父评论ID |
| status | TINYINT | 状态: 1正常/0隐藏 |

### 扩展表

#### 标签表 (tag)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键 |
| name | VARCHAR(50) | 标签名 |
| color | VARCHAR(20) | 颜色值 |
| use_count | INT | 使用次数 |

#### 文章标签关联表 (post_tag)
| 字段 | 类型 | 说明 |
|------|------|------|
| post_id | BIGINT | 文章ID |
| tag_id | BIGINT | 标签ID |

#### 点赞表 (post_like) / 收藏表 (post_favorite)
| 字段 | 类型 | 说明 |
|------|------|------|
| id | BIGINT | 主键 |
| post_id | BIGINT | 文章ID |
| user_id | BIGINT | 用户ID |

---

## API 接口

### 公开接口
| 方法 | 路径 | 说明 |
|------|------|------|
| POST | `/api/auth/login` | 用户登录 |
| POST | `/api/auth/register` | 游客注册 |
| POST | `/api/auth/send-code` | 发送邮箱验证码 |
| GET | `/api/posts` | 获取博文列表 |
| GET | `/api/posts/{id}` | 获取博文详情 |
| GET | `/api/posts/category/{category}` | 按分类查询 |
| GET | `/api/posts/search` | 搜索博文 |
| GET | `/api/comments/post/{postId}` | 获取评论 |
| GET | `/api/tags` | 获取所有标签 |
| GET | `/api/tags/hot` | 获取热门标签 |

### 认证接口 (需要Token)
| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/api/auth/me` | 获取用户信息 |
| POST | `/api/comments` | 创建评论 |
| POST | `/api/interaction/like/{postId}` | 点赞 |
| POST | `/api/interaction/favorite/{postId}` | 收藏 |

### 管理员接口 (需要ADMIN角色)
| 方法 | 路径 | 说明 |
|------|------|------|
| POST | `/api/posts` | 创建博文 |
| PUT | `/api/posts` | 更新博文 |
| DELETE | `/api/posts/{id}` | 删除博文 |
| GET | `/api/admin/users` | 用户管理 |
| POST | `/api/tags` | 创建标签 |
| POST | `/api/upload/image` | 上传图片 |

---

## 后端项目结构

```
src/main/java/com/lzq/myblog/
├── MyBlogApplication.java          # 启动类
├── common/Result.java              # 统一响应
├── config/
│   ├── Knife4jConfig.java          # API文档
│   ├── MyBatisPlusConfig.java      # ORM配置
│   ├── RedisConfig.java            # Redis缓存
│   └── SecurityConfig.java         # 安全配置
├── controller/
│   ├── AdminController.java        # 管理员API
│   ├── AuthController.java         # 认证API
│   ├── CommentController.java      # 评论API
│   ├── InteractionController.java  # 互动API
│   ├── PostController.java         # 博文API
│   ├── TagController.java          # 标签API
│   └── UploadController.java       # 上传API
├── dto/                            # 数据传输对象
├── entity/                         # 实体类
├── exception/                      # 异常处理
├── filter/JwtAuthenticationFilter.java
├── mapper/                         # 数据访问层
├── service/                        # 服务层
└── utils/JwtUtils.java
```

---

## 前端项目结构

```
frontend/
├── src/
│   ├── api/                       # API接口模块
│   │   ├── auth.js, post.js, comment.js
│   │   ├── tag.js, interaction.js, upload.js
│   │   └── admin.js, markdown.js
│   ├── assets/images/bg.jpg       # 首页背景图
│   ├── layouts/                   # 布局组件
│   ├── router/index.js            # 路由配置
│   ├── store/user.js              # 状态管理
│   ├── styles/global.scss         # 全局样式
│   └── views/
│       ├── auth/Login.vue, Register.vue
│       ├── guest/Home.vue, PostList.vue, PostDetail.vue, Search.vue
│       └── admin/Dashboard.vue, Posts.vue, Comments.vue, Users.vue
├── package.json
└── vite.config.js
```

---

## 功能特性

### 核心功能
- **用户系统**: 注册、登录、JWT认证、角色权限
- **博文系统**: CRUD、分类、搜索、Markdown渲染
- **评论系统**: 发表评论、回复、审核

### 扩展功能
- **标签系统**: 文章标签、热门标签云
- **互动功能**: 点赞、收藏
- **文件上传**: 图片、头像、封面
- **Redis缓存**: 文章列表、详情缓存

### 前端特性
- **响应式设计**: 适配PC和移动端
- **全屏Hero首页**: 背景图 + 动画效果
- **Markdown渲染**: 代码高亮支持
- **管理后台**: 统计仪表盘

---

## 配置说明

```properties
# 服务器端口
server.port=8080

# MySQL 数据库
spring.datasource.url=jdbc:mysql://localhost:3306/myblog
spring.datasource.username=root
spring.datasource.password=

# JWT 配置
jwt.secret=myBlogSecretKey2025SH4D0W467194403
jwt.expiration=86400000

# Redis 配置 (可选)
spring.data.redis.host=localhost
spring.data.redis.port=6379

# 文件上传
file.upload.path=./uploads
file.upload.max-size=10485760
```
## 前后端启动指令
后端启动（端口 8080）
```cd /Users/lanzhiqiang/code/java_code/myBlog && ./mvnw spring-boot:run
前端启动（端口 5173）
```cd /Users/lanzhiqiang/code/java_code/myBlog/frontend && npm run dev
访问地址
前端页面：http://localhost:5173
后端 API：http://localhost:8080
API 文档：http://localhost:8080/doc.html

---

## 管理员账号
- **用户名**: sh4d0w
- **密码**: 467194403
- **角色**: ADMIN

---

**文档版本**: v5.0  
**最后更新**: 2025-12-01  
**项目状态**: ✅ 开发完成
